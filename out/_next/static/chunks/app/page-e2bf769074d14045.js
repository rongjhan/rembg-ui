(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4034:function(e,t,n){Promise.resolve().then(n.bind(n,8487))},1852:function(e,t,n){"use strict";n.d(t,{h:function(){return a}});var i=n(7437),r=n(4277);n(2265);let o=r.ZP.div.withConfig({componentId:"sc-210e12a5-0"})(["display:inline-flex;justify-content:center;align-items:center;cursor:pointer;user-select:none;background-color:var(--tab-cotnent-color);transition:background 0.3s;&:hover{background:var(--tab-cotnent-color-darken) radial-gradient(circle,transparent 1%,var(--tab-cotnent-color-darken) 1%) center/15000%;}&:active{background-color:var(--tab-cotnent-color-lighten);background-size:100%;transition:background 0s;>img{transform:scale(0.9);transform-origin:50% 50%;}}"]);function a(e){let t=e.iconSize||"50%";return(0,i.jsx)(o,{style:e.style,className:e.className,onClick:e.onClick,children:(0,i.jsx)("img",{src:e.src,style:{width:t,aspectRatio:1,objectFit:"contain",cursor:"pointer"}})})}},2669:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(7437),r=n(4277);let o=r.ZP.div.withConfig({componentId:"sc-d648376e-0"})(["--icon-size :16px;--shadow-r-shift :3px;--shadow-d-shift :0px;--shadow-spread :7px;--shadow-blur :6px;--shadow-basic-margin :calc(var(--shadow-spread) + var(--shadow-blur)/2);--shadow-color :#eae8e8;border-radius:10px;transform:rotate(1deg);contain:layout;cursor:pointer;margin-top:max(var(--shadow-basic-margin),calc((var(--icon-size)/2)));margin-left:var(--shadow-basic-margin);margin-right:calc(var(--shadow-r-shift) + var(--shadow-basic-margin));margin-bottom:calc(var(--shadow-d-shift) + var(--shadow-basic-margin));box-shadow:var(--shadow-r-shift) var(--shadow-d-shift) var(--shadow-spread) var(--shadow-blur) var(--shadow-color);"]),a=r.ZP.img.withConfig({componentId:"sc-d648376e-1"})(["height:100%;width:100%;display:block;object-fit:contain;object-position:center center;"]),l=r.ZP.img.attrs(e=>{let t=e.onClick;return{onClick:e=>{e.stopPropagation(),t(e)}}}).withConfig({componentId:"sc-d648376e-2"})(["position:absolute;top:0;right:0;aspect-ratio:1/1;height:var(--icon-size);transform:translateX(50%) translateY(-50%);background-color:#805959;border-radius:50%;cursor:pointer;"]);function s(e){return(0,i.jsxs)(o,{style:e.style,onClick:e.onClick,children:[(0,i.jsx)(a,{src:e.src}),(0,i.jsx)(l,{src:"./cancel.svg",onClick:e.onDelete})]})}},8893:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var i=n(4577),r=n(828);function o(e){return(0,r.v9)(t=>{let n=(0,i.wS)(t.editor,e);return n?[!0,{...n.payload}]:[!1,{value:void 0}]},a)}function a(e,t){return e[0]===t[0]&&(!0!==e[0]||e[1].value===t[1].value)}},8296:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(2265);function r(e){let[t,n]=(0,i.useState)(),r=(0,i.useRef)();return(0,i.useEffect)(()=>{if(r.current){let t=new ResizeObserver(t=>{let{width:i,height:r}=t[0].contentRect;e&&e(i,r),n({width:i,height:r})});return t.observe(r.current),()=>{t.disconnect()}}},[r.current]),{target:r,size:t}}},2151:function(e,t,n){"use strict";function i(e,t){let n='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(e,'" height="').concat(e,'" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="').concat(t,'"/></svg>');return"data:image/svg+xml,".concat(encodeURI(n).replace(/#|%20/g,e=>"#"==e?"%23":" "))}n.d(t,{V:function(){return i}})},8487:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var i=n(7437),r=n(2265),o=n(828),a=n(8893),l=n(66),s=n(8377),c=n(8296),d=n(4277);let h=d.ZP.div.withConfig({componentId:"sc-d85712ce-0"})(["&::-webkit-scrollbar{display:none;}scrollbar-width:none;width:var(--width);height:var(--height);overflow:auto;transform-origin:left top;transform:translateY(var(--width)) rotate(-90deg);position:relative;padding:10px 0px;"]),u=d.ZP.div.withConfig({componentId:"sc-d85712ce-1"})(["width:var(--height);height:var(--width);transform-origin:left top;transform:rotate(90deg);position:absolute;top:0px;left:var(--width);display:flex;flex-wrap:nowrap;align-items:stretch;column-gap:",'px;&::after{content:"";display:block;padding-right:1px;}&>*{box-sizing:border-box;max-height:90%;flex-shrink:0;flex-grow:0;}'],e=>e.$columnGap);function g(e){let{target:t,size:n}=(0,c.Z)();return(0,i.jsx)("div",{ref:t,className:e.className,style:{...e.style},children:(0,i.jsx)(h,{style:{"--width":(null==n?void 0:n.height)+"px","--height":(null==n?void 0:n.width)+"px"},children:(0,i.jsx)(u,{$columnGap:e.gap,children:e.children})})})}var p=n(2669);let f=d.ZP.div.withConfig({componentId:"sc-eedfa4bf-0"})(["width:min-content;display:inline-flex;user-select:none;flex-direction:row;"]),x=d.ZP.label.withConfig({componentId:"sc-eedfa4bf-1"})(["cursor:pointer;padding:2px;filter:drop-shadow(1px 1px 3px rgb(190 190 190));&:first-child{border-radius:5px 0 0 5px;>img{border-radius:5px 0 0 5px;}}&:last-child{border-radius:0 5px 5px 0;>img{border-radius:0 5px 5px 0;}}>img{display:block;height:100%;margin:auto;object-fit:contain;object-position:center;}>input{display:none;margin:0;appearance:none;}"]);function m(e){return(0,i.jsxs)(x,{style:{backgroundColor:e.checked?"var(--tab-cotnent-color-darken)":"var(--tab-cotnent-color)",...e.style},children:[(0,i.jsx)("input",{type:e.type,name:e.name,value:e.value,checked:e.checked}),(0,i.jsx)("img",{src:e.iconSrc,style:{width:(e.iconSize||70)+"%"}})]})}function v(e){let t=Array.isArray(e.selected)?"checkbox":"radio";return(0,i.jsx)(f,{onChange:e.onChange,children:e.children.map(n=>{let i="radio"==t?n.props.value==e.selected:e.selected.includes(n.props.value);return(0,r.createElement)(m,{...n.props,key:n.props.value,name:e.name,type:t,checked:i})})})}let w="option";var b=n(1472),y=n(697),j=n(4466),k=n(1618),C=n(1852),I=n(2151);let S=d.ZP.div.withConfig({componentId:"sc-2ee9f934-0"})(["display:flex;flex-direction:column;align-items:center;padding:5px;width:min-content;min-width:70px;> span:first-child{font-size:14px;user-select:none;color:#aca8a3;flex-grow:0;padding:2px;text-align:center;}> *:nth-child(2){margin-top:auto;margin-bottom:auto;}"]);function z(e){return(0,i.jsxs)(S,{style:e.style,children:[(0,i.jsx)("span",{children:e.configName}),e.children]})}function Z(e){let t=(0,o.I0)(),[n,{value:r}]=(0,a.A)("showImages");return(0,i.jsxs)("div",{style:{width:90,height:"var(--nav-height)",display:"flex",flexDirection:"column",userSelect:"none",backgroundColor:"var(--tab-cotnent-color)"},children:[(0,i.jsx)(C.h,{iconSize:"40%",style:{flexGrow:1,borderBottom:"1px solid #e0d6d6"},src:"/folder.png",onClick:()=>{t((0,s.Q9)())}}),(0,i.jsx)(C.h,{iconSize:"12%",style:{flexGrow:0,height:25,transform:r?"none":"rotate(-0.5turn)"},src:"/down_arrow.svg",onClick:()=>{t((0,l.H7)(!r))}})]})}function A(e){let t=(0,o.I0)(),[n,{value:r}]=(0,a.A)("runTimes");return n?(0,i.jsx)(z,{configName:"run",children:(0,i.jsx)(C.h,{iconSize:"40%",style:{width:"100%",height:"100%"},src:"/run.svg",onClick:()=>{t((0,l.t1)(parseInt(r)+1))}})}):null}function N(e){let t=(0,o.I0)(),[n,{value:r}]=(0,a.A)("cutTimes");return n?(0,i.jsx)(z,{configName:"cut",children:(0,i.jsx)(C.h,{iconSize:"45%",style:{width:"100%",height:"100%"},src:"/cut.svg",onClick:()=>{t((0,l.Xh)(parseInt(r)+1))}})}):null}function P(e){let t=(0,o.I0)(),[n,r]=(0,a.A)("model");return n?(0,i.jsx)(z,{configName:"model",children:(0,i.jsx)(b.Z,{select:!0,sx:{width:120},onChange:e=>{t((0,l.hz)(e.target.value))},size:"small",value:r.value,children:r.options.map(e=>(0,i.jsx)(y.Z,{value:e,children:e},e))})}):null}function _(e){let t=(0,o.I0)(),[n,r]=(0,a.A)("markStyle");return n?(0,i.jsx)(z,{configName:"mark style",children:(0,i.jsx)(v,{name:"markStyle",selected:r.value,onChange:e=>{t((0,l.$k)(e.target.value))},children:r.options.map(e=>(0,i.jsx)(w,{style:{width:30,height:30},value:e,iconSize:70,iconSrc:"include_box"==e?"/rect-dashed.svg":"include_points"==e?(0,I.V)(30,"#009e2dd7"):(0,I.V)(30,"#ff000080")}))})}):null}function E(e){let t=(0,o.I0)(),[n,r]=(0,a.A)("alphaEstimate");return n?(0,i.jsx)(z,{configName:"alpha Estimate",children:(0,i.jsx)(j.Z,{checked:r.value,onChange:e=>t((0,l.Fk)(!!e.target.checked))})}):null}function T(e){let t=(0,o.I0)(),[n,r]=(0,a.A)("modifyTool");return n?(0,i.jsx)(z,{configName:"modifyTool",children:(0,i.jsx)(v,{name:"modifyToolType",selected:r.value,onChange:e=>t((0,l.Lf)(e.target.value)),children:r.options.map(e=>(0,i.jsx)(w,{style:{width:30,height:30},value:e,iconSize:70,iconSrc:"white"==e?(0,I.V)(30,"white"):"black"==e?(0,I.V)(30,"black"):"./eraser.svg"}))})}):null}function D(e){let t=(0,o.I0)(),[n,r]=(0,a.A)("modifyToolSize");return n?(0,i.jsx)(z,{configName:"tool size",children:(0,i.jsx)(k.ZP,{value:parseInt(r.value),sx:{width:70},onChange:e=>t((0,l.ef)(e.target.value)),valueLabelDisplay:"auto",shiftStep:30,step:1,min:5,max:50})}):null}function G(e){let t=(0,o.I0)(),[n,r]=(0,a.A)("initLayer");return n?(0,i.jsx)(z,{configName:"layer",children:(0,i.jsx)(v,{name:"layers",selected:r.value,onChange:e=>{t((0,l.KD)({value:e.target.value,checked:e.target.checked}))},children:r.options.map(e=>(0,i.jsx)(w,{style:{width:30,height:30},value:e,iconSize:70,iconSrc:"mask"==e?"/mask.svg":"/image.svg"}))})}):null}function L(e){let t=(0,o.I0)(),[n,r]=(0,a.A)("modifyLayer");return n?(0,i.jsx)(z,{configName:"layer",children:(0,i.jsx)(v,{name:"modifyLayers",selected:r.value,onChange:e=>{t((0,l.zs)({value:e.target.value,checked:e.target.checked}))},children:r.options.map(e=>(0,i.jsx)(w,{style:{width:30,height:30},value:e,iconSize:70,iconSrc:"mask"==e?"/mask.svg":"/image.svg"}))})}):null}function R(e){let t=(0,o.I0)(),[n,r]=(0,a.A)("stage");return(0,i.jsx)(O,{style:e.style,children:n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{setSelected:e=>{t((0,l.z1)(e))},children:r.options.map(e=>(0,i.jsx)(F,{value:e,selected:r.value,children:"init"==e?(0,i.jsx)("img",{src:"/magic-wand.png",style:{width:17}}):(0,i.jsx)("img",{src:"/edit.png",style:{width:18}})},e))}),(0,i.jsxs)($,{value:"init",selected:r.value,children:[(0,i.jsx)(P,{}),(0,i.jsx)(E,{}),(0,i.jsx)(_,{}),(0,i.jsx)(G,{}),(0,i.jsx)(A,{})]}),(0,i.jsxs)($,{value:"modify",selected:r.value,children:[(0,i.jsx)(T,{}),(0,i.jsx)(D,{}),(0,i.jsx)(L,{}),(0,i.jsx)(N,{})]})]}):null})}function V(e){let t=r.useCallback(t=>{for(let n of t.currentTarget.querySelectorAll("div[data-value]"))if(n===t.target||n.contains(t.target)){e.setSelected(n.getAttribute("data-value"));break}},[]);return(0,i.jsx)(Y,{onClick:t,children:e.children})}let O=d.ZP.div.withConfig({componentId:"sc-69879f3c-0"})(["display:flex;flex-direction:column;"]),Y=d.ZP.div.withConfig({componentId:"sc-69879f3c-1"})(["height:var(--tab-height);display:flex;position:relative;flex-grow:0;align-items:stretch;background-color:var(--tab-color);flex-wrap:nowrap;"]),F=d.ZP.div.attrs(e=>({"data-value":e.value,style:{backgroundColor:e.selected===e.value?"var(--tab-cotnent-color)":"transparent",filter:"drop-shadow(rgb(190, 190, 190) 0px -3px 2px)"}})).withConfig({componentId:"sc-69879f3c-2"})(["min-width:fit-content;padding:5px 10px;width:100px;cursor:pointer;user-select:none;display:flex;flex-grow:0;align-items:center;justify-content:center;&:last-child{margin-right:auto;}"]),$=d.ZP.div.attrs(e=>({style:e.selected!==e.value?{display:"none"}:{}})).withConfig({componentId:"sc-69879f3c-3"})(["flex-grow:1;overflow:hidden;display:flex;width:100%;height:calc(var(--nav-height) - var(--tab-height));background-color:var(--tab-cotnent-color);"]);var B=n(6176);function Q(e){let{refetch:t}=B.E.useQuerySubscription({rawImage:e.img});return(0,i.jsx)(p.Z,{...e})}function U(e){let t=(0,o.I0)(),n=(0,o.v9)(e=>e.rawImages.images),[r,{value:c}]=(0,a.A)("showImages");return(0,i.jsxs)("div",{style:{...e.style,display:"flex",width:"100%"},children:[(0,i.jsx)(R,{style:{flexGrow:1}}),(0,i.jsx)(Z,{}),(0,i.jsx)(g,{style:{position:"fixed",top:"var(--nav-height)",left:0,zIndex:1,transform:c?"scaleY(1)":"scaleY(0)",transformOrigin:"top",width:"100%",userSelect:"none",height:100,transition:"transform 0.2s ease",boxShadow:"0px 11px 14px -9px rgba(0,0,0,0.63)",backgroundColor:"white"},gap:15,children:n.map(e=>(0,i.jsx)(Q,{style:{width:100,height:"80%"},img:e,src:e.blobURL,onClick:()=>t((0,l.po)(e.id)),onDelete:()=>t((0,s.CM)(e))},e.id))})]})}let X=(0,n(4232).default)(()=>Promise.all([n.e(230),n.e(125)]).then(n.bind(n,2125)),{loadableGenerated:{webpack:()=>[2125]},ssr:!1});function q(){return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"fixed",inset:"0"},children:[(0,i.jsx)(U,{}),(0,i.jsx)(X,{})]})}}},function(e){e.O(0,[738,966,225,971,69,744],function(){return e(e.s=4034)}),_N_E=e.O()}]);